<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2487.6">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Times; -webkit-text-stroke: #000000}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Times; -webkit-text-stroke: #000000; min-height: 14.0px}
    span.s1 {font-kerning: none}
  </style>
</head>
<body>
<p class="p1"><span class="s1">&lt;!DOCTYPE html&gt;</span></p>
<p class="p1"><span class="s1">&lt;html lang="en"&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">&lt;head&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;meta charset="UTF-8"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;title&gt;贪吃蛇游戏&lt;/title&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;style&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>body {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>display: flex;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>justify-content: center;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>align-items: center;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>height: 100vh;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>margin: 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>background-color: #f0f0f0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>font-family: Arial, sans-serif;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.game-container {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>text-align: center;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>display: flex;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>align-items: center;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>justify-content: space-between;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>max-width: 100%;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>flex-wrap: wrap;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>#gameCanvas {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>border: 2px solid #333;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>border-radius: 5px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>margin: 0 auto;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>#gameControls {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>text-align: center;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>margin: 0 auto;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>padding: 0 8px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>#gameScore {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>display: flex;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>flex-direction: column;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>align-items: center;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>justify-content: center;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>#score {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>font-size: 24px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>margin: 10px 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>#startBtn {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>font-size: 18px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>padding: 12px 24px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>background: linear-gradient(145deg, #f0f0f0, #cacaca);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>color: #333;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>border: none;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>border-radius: 10px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>cursor: pointer;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>transition: all 0.3s ease;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>box-shadow: 5px 5px 10px #bebebe,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>-5px -5px 10px #ffffff;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>position: relative;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>overflow: hidden;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>font-weight: bold;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>text-transform: uppercase;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>letter-spacing: 1px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>#startBtn::before {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>content: '';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>position: absolute;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>top: 2px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>left: 2px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>right: 2px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>bottom: 50%;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>background: linear-gradient(180deg, rgba(255, 255, 255, 0.3), transparent);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>border-radius: 8px 8px 0 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>pointer-events: none;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>#startBtn:hover {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>transform: translateY(-2px);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>box-shadow: 6px 6px 12px #bebebe,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>-6px -6px 12px #ffffff;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>background: linear-gradient(145deg, #f5f5f5, #d0d0d0);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>#startBtn:active {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>transform: translateY(1px);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>box-shadow: inset 4px 4px 8px #bebebe,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>inset -4px -4px 8px #ffffff;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>background: linear-gradient(145deg, #e6e6e6, #c0c0c0);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.controls {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>display: grid;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>grid-template-columns: repeat(3, 1fr);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>gap: 10px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>width: 180px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>margin: 20px auto;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.control-btn {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>width: 60px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>height: 60px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>font-size: 24px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>background: linear-gradient(145deg, #f0f0f0, #cacaca);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>color: #333;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>border: none;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>border-radius: 50%;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>cursor: pointer;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>transition: all 0.3s ease;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>display: flex;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>justify-content: center;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>align-items: center;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>box-shadow: 5px 5px 10px #bebebe,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>-5px -5px 10px #ffffff;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>position: relative;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>overflow: hidden;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.control-btn::before {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>content: '';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>position: absolute;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>top: 5%;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>left: 5%;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>right: 5%;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>bottom: 5%;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>border-radius: 50%;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>z-index: -1;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.control-btn:hover {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>transform: translateY(-2px);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>box-shadow: 6px 6px 12px #bebebe,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>-6px -6px 12px #ffffff;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.control-btn:active {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>transform: translateY(1px);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>box-shadow: inset 4px 4px 8px #bebebe,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>inset -4px -4px 8px #ffffff;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>#up {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>grid-column: 2;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>#left {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>grid-column: 1;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>grid-row: 2;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>#right {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>grid-column: 3;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>grid-row: 2;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>#down {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>grid-column: 2;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>grid-row: 3;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;/style&gt;</span></p>
<p class="p1"><span class="s1">&lt;/head&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">&lt;body&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;div class="game-container"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;canvas id="gameCanvas" width="300" height="300"&gt;&lt;/canvas&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;div id="gameControls"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;div id="gameScore"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div id="score"&gt;得分: 0&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;button id="startBtn"&gt;开始游戏&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;div class="controls"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;button id="up" class="control-btn" onclick="changeDirectionByButton('up')"&gt;↑&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;button id="left" class="control-btn" onclick="changeDirectionByButton('left')"&gt;←&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;button id="right" class="control-btn" onclick="changeDirectionByButton('right')"&gt;→&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;button id="down" class="control-btn" onclick="changeDirectionByButton('down')"&gt;↓&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;script&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const canvas = document.getElementById('gameCanvas');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const ctx = canvas.getContext('2d');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const scoreElement = document.getElementById('score');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const startBtn = document.getElementById('startBtn');</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const gridSize = 15;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>const tileCount = canvas.width / gridSize;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>let snake = [{ x: 10, y: 10 }];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>let food = { x: 15, y: 15 };</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>let dx = 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>let dy = 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>let score = 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>let gameRunning = false;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>function drawGame() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>if (!gameRunning) return;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>clearCanvas();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>moveSnake();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>drawSnake();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>drawFood();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>checkCollision();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>updateScore();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>setTimeout(drawGame, 200);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>function clearCanvas() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>ctx.fillStyle = '#f0f0f0';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>ctx.fillRect(0, 0, canvas.width, canvas.height);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>function moveSnake() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const head = { x: snake[0].x + dx, y: snake[0].y + dy };</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>snake.unshift(head);</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>if (head.x === food.x &amp;&amp; head.y === food.y) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>generateFood();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>score += 10;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>} else {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>snake.pop();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>function drawSnake() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>snake.forEach((segment, index) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const gradient = ctx.createLinearGradient(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>segment.x * gridSize,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>segment.y * gridSize,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>(segment.x + 1) * gridSize,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>(segment.y + 1) * gridSize</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>gradient.addColorStop(0, '#4CAF50');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>gradient.addColorStop(1, '#45a049');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>ctx.fillStyle = gradient;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>ctx.fillRect(segment.x * gridSize, segment.y * gridSize, gridSize - 2, gridSize - 2);</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (index === 0) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>// Draw eyes</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>ctx.fillStyle = 'white';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>ctx.beginPath();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>ctx.arc(segment.x * gridSize + 5, segment.y * gridSize + 5, 2, 0, 2 * Math.PI);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>ctx.arc(segment.x * gridSize + 10, segment.y * gridSize + 5, 2, 0, 2 * Math.PI);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>ctx.fill();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>function drawFood() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const gradient = ctx.createRadialGradient(</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>food.x * gridSize + gridSize / 2,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>food.y * gridSize + gridSize / 2,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>2,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>food.x * gridSize + gridSize / 2,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>food.y * gridSize + gridSize / 2,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>gridSize / 2</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>gradient.addColorStop(0, '#ff6b6b');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>gradient.addColorStop(1, '#ee5253');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>ctx.fillStyle = gradient;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>ctx.beginPath();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>ctx.arc(food.x * gridSize + gridSize / 2, food.y * gridSize + gridSize / 2, gridSize / 2 - 1, 0, 2 * Math.PI);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>ctx.fill();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>function generateFood() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>food.x = Math.floor(Math.random() * tileCount);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>food.y = Math.floor(Math.random() * tileCount);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>function checkCollision() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const head = snake[0];</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>if (head.x &lt; 0 || head.x &gt;= tileCount || head.y &lt; 0 || head.y &gt;= tileCount) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>gameOver();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>for (let i = 1; i &lt; snake.length; i++) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (head.x === snake[i].x &amp;&amp; head.y === snake[i].y) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>gameOver();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>function gameOver() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>gameRunning = false;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>startBtn.textContent = '重新开始';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>startBtn.style.display = 'inline-block';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>alert(`游戏结束！你的得分是: ${score}`);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>function updateScore() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>scoreElement.textContent = `得分: ${score}`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>function resetGame() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>snake = [{ x: 10, y: 10 }];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>food = { x: 15, y: 15 };</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>dx = 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>dy = 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>score = 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>updateScore();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>document.addEventListener('keydown', changeDirection);</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>function changeDirection(event) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const LEFT_KEY = 37;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const RIGHT_KEY = 39;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const UP_KEY = 38;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const DOWN_KEY = 40;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const keyPressed = event.keyCode;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const goingUp = dy === -1;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const goingDown = dy === 1;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const goingRight = dx === 1;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const goingLeft = dx === -1;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>if (keyPressed === LEFT_KEY &amp;&amp; !goingRight) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>dx = -1;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>dy = 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>if (keyPressed === UP_KEY &amp;&amp; !goingDown) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>dx = 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>dy = -1;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>if (keyPressed === RIGHT_KEY &amp;&amp; !goingLeft) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>dx = 1;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>dy = 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>if (keyPressed === DOWN_KEY &amp;&amp; !goingUp) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>dx = 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>dy = 1;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>function changeDirectionByButton(direction) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>if (direction === 'left' &amp;&amp; dx !== 1) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>dx = -1;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>dy = 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>} else if (direction === 'up' &amp;&amp; dy !== 1) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>dx = 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>dy = -1;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>} else if (direction === 'down' &amp;&amp; dy !== -1) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>dx = 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>dy = 1;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>} else if (direction === 'right' &amp;&amp; dx !== -1) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>dx = 1;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>dy = 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>startBtn.addEventListener('click', () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>resetGame();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>gameRunning = true;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>startBtn.style.display = 'none';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>drawGame();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>});</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>clearCanvas();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;/script&gt;</span></p>
<p class="p1"><span class="s1">&lt;/body&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1">&lt;/html&gt;</span></p>
</body>
</html>
